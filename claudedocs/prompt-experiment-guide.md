# ìŒì•… í”„ë¡¬í”„íŠ¸ ì‹¤í—˜ ê°€ì´ë“œ

> **ëŒ€ìƒ**: ë¹„ê°œë°œì íŒ€ì› (í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§, ëª¨ë¸ ë¹„êµ, ì„±ëŠ¥ í‰ê°€)
> **ì—…ë°ì´íŠ¸**: 2025-11-01

---

## ğŸ“‹ ë¹ ë¥¸ ì‹œì‘

### ìˆ˜ì • íŒŒì¼

- **GPT í”„ë¡¬í”„íŠ¸**: `src/lib/openai/client.ts`
- **Mureka ì„¤ì •**: `src/lib/mureka/client.ts`

### ê°€ì¥ ì‰¬ìš´ ì‹¤í—˜

**Temperature ì¡°ì •** (ì°½ì˜ì„± ì¡°ì ˆ):
```typescript
// src/lib/openai/client.ts Line 139
temperature: 0.6,  // í˜„ì¬ 0.8 â†’ 0.6 (ë” ì¼ê´€ì ) ë˜ëŠ” 1.0 (ë” ì°½ì˜ì )
```

### ê²°ê³¼ í™•ì¸

1. **ë¡œì»¬ (http://localhost:3000)**:
   - ë…ì„œ ì—¬ì • ì‹œì‘ â†’ ìŒì•… ìë™ ì¬ìƒ
   - í•˜ë‹¨ í”Œë ˆì´ì–´ ë°”ì—ì„œ ìŒì•… ë“£ê¸°
   - ìŒì•… í’ˆì§ˆ, ë¶„ìœ„ê¸°, í…œí¬ ì§ì ‘ í‰ê°€

2. **Production (https://25-capstone-project-iise.vercel.app)**:
   - ì‹¤ì œ ë°°í¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸
   - í”Œë ˆì´ì–´ ë°”ì—ì„œ ìŒì•… ì¬ìƒ ë° í‰ê°€

3. **ì°¸ê³ ìš© (ì„ íƒ)**:
   - Supabase â†’ `music_tracks` í…Œì´ë¸”
   - ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ ì›ë¬¸ í™•ì¸ ê°€ëŠ¥

---

## ğŸ¯ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

### 1. v0 í”„ë¡¬í”„íŠ¸ (ì—¬ì • ì‹œì‘)

**ìœ„ì¹˜**: `src/lib/openai/client.ts` **Line 52-62**

**ì£¼ìš” ìˆ˜ì • ê°€ëŠ¥ ìš”ì†Œ**:

| ìš”ì†Œ | í˜„ì¬ê°’ | ìˆ˜ì • ì˜ˆì‹œ |
|------|--------|----------|
| ë¶„ìœ„ê¸° | "contemplative, anticipatory" | "peaceful, meditative" (ì°¨ë¶„) / "exciting, mysterious" (ê¸´ì¥) |
| í…œí¬ | "70-90 BPM" | "50-70 BPM" (ëŠë¦¼) / "90-110 BPM" (ë¹ ë¦„) |
| í˜ì´ë“œ | "5-10 seconds" | "3-7 seconds" (ì§§ìŒ) / "10-15 seconds" (ê¹€) |

**ì˜ˆì‹œ**: ë” ì°¨ë¶„í•œ ì‹œì‘
```typescript
// Line 57
Create a peaceful, meditative mood that represents the start of a reading journey.
IMPORTANT:
- Start with a very soft, gradual introduction (first 10-15 seconds)
- Use a slow tempo (50-70 BPM) for deep contemplation
```

---

### 2. vN í”„ë¡¬í”„íŠ¸ (ë…ì„œ ì¤‘)

**ìœ„ì¹˜**: `src/lib/openai/client.ts` **Line 104-129**

**ì£¼ìš” ìˆ˜ì • ê°€ëŠ¥ ìš”ì†Œ**:

| ìš”ì†Œ | í˜„ì¬ê°’ | ìˆ˜ì • ì˜ˆì‹œ | íš¨ê³¼ |
|------|--------|----------|------|
| ì»¨í…ìŠ¤íŠ¸ ê°œìˆ˜ | `.slice(-2)` (ìµœê·¼ 2ê°œ) | `.slice(-3)` | ë” ê¸´ ì»¨í…ìŠ¤íŠ¸ (ë¹„ìš©â†‘) |
| í…œí¬ ë²”ìœ„ | `Â±10 BPM` | `Â±5 BPM` | ë” ì¼ê´€ì  |
| | | `Â±15 BPM` | ë” ììœ ë¡œìš´ ë³€í™” |

**ì˜ˆì‹œ**: ë” ì¼ê´€ì ì¸ í…œí¬
```typescript
// Line 126
- Keep tempo within ${prevTempo - 5} to ${prevTempo + 5} BPM for very smooth transitions
```

---

### 3. vFinal í”„ë¡¬í”„íŠ¸ (ì™„ë… í”¼ë‚ ë ˆ)

**ìœ„ì¹˜**: `src/lib/openai/client.ts` **Line 69-96**

**ì£¼ìš” ìˆ˜ì • ê°€ëŠ¥ ìš”ì†Œ**:

| ìš”ì†Œ | í˜„ì¬ê°’ | ìˆ˜ì • ì˜ˆì‹œ |
|------|--------|----------|
| í”¼ë‚ ë ˆ ìŠ¤íƒ€ì¼ | "conclusive, synthesizing" | "epic, cinematic, dramatic" (ì¥ì—„) |
| ì•„ì›ƒíŠ¸ë¡œ ê¸¸ì´ | "15-20 seconds" | "20-30 seconds" (ë” ê¸´ ì—¬ìš´) |
| í…œí¬ ë²”ìœ„ | `Â±15 BPM` | `Â±20 BPM` (ë” ê·¹ì ) |

**ì˜ˆì‹œ**: ë” ì¥ì—„í•œ í”¼ë‚ ë ˆ
```typescript
// Line 91
Create an epic, cinematic finale that dramatically concludes the entire reading journey.
IMPORTANT:
- Build to a grand crescendo with orchestral elements
- Include an extended, triumphant outro (20-30 seconds) with gradual fade-out
```

---

### 4. System Prompt (ê³µí†µ ì„¤ì •)

**ìœ„ì¹˜**: `src/lib/openai/client.ts` **Line 34-46, 139**

**Temperature** (ì°½ì˜ì„± ì¡°ì ˆ):

| ê°’ | íŠ¹ì§• | ì¶”ì²œ ìƒí™© |
|----|------|----------|
| 0.3-0.6 | ì¼ê´€ì , ì˜ˆì¸¡ ê°€ëŠ¥ | ì¥ë¥´ ì¼ê´€ì„± ì¤‘ìš” |
| 0.8 (í˜„ì¬) | ê· í˜• ì¡íŒ ì°½ì˜ì„± | ì¼ë°˜ì  ì‚¬ìš© âœ“ |
| 0.9-1.0 | ë§¤ìš° ì°½ì˜ì  | ì‹¤í—˜ì  ìŒì•… |

**í¬ë¡œìŠ¤í˜ì´ë“œ ê·œì¹™ ê°•í™”**:
```typescript
// Line 38
1. Maintain strict tempo consistency (Â±5 BPM variation between tracks)  // Â±10-15 â†’ Â±5
```

---

## âš™ï¸ GPT-4o-mini ì„¤ì •

### ëª¨ë¸ íŒŒë¼ë¯¸í„°

**ìœ„ì¹˜**: `src/lib/openai/client.ts` **Line 132-140**

| íŒŒë¼ë¯¸í„° | í˜„ì¬ê°’ | ì¡°ì • ê°€ëŠ¥ | íš¨ê³¼ |
|---------|--------|----------|------|
| `model` | `gpt-4o-mini` | `gpt-4o` | í’ˆì§ˆ 10-20%â†‘, ë¹„ìš© 16ë°°â†‘ |
| `temperature` | `0.8` | `0.0 ~ 1.0` | ì°½ì˜ì„± ì¡°ì ˆ |

### ë¹„ìš© ì •ë³´

**GPT-4o-mini** (í˜„ì¬ ì‚¬ìš©):
- íŠ¸ë™ë‹¹ ë¹„ìš©: **$0.001 ~ $0.003**
- v0 ~500 í† í°, vN ~800 í† í°, vFinal ~2000 í† í°

**GPT-4o** (ì—…ê·¸ë ˆì´ë“œ):
- íŠ¸ë™ë‹¹ ë¹„ìš©: **$0.01 ~ $0.03** (16ë°° ë¹„ìŒˆ)
- ê¶Œì¥: ì¤‘ìš” í”„ë¡œì íŠ¸ë§Œ ì‚¬ìš©

---

## ğŸµ Mureka API íŒŒë¼ë¯¸í„°

### í˜„ì¬ ìƒíƒœ

âœ… **ì™„ì „ êµ¬í˜„ë¨** - ì‹¤ì œ ìŒì•… ìƒì„± ê°€ëŠ¥

### í´ë§ ì„¤ì •

**ìœ„ì¹˜**: `src/lib/mureka/client.ts` **Line 173-176**

```typescript
const maxAttempts = 60;       // ìµœëŒ€ ì‹œë„ íšŸìˆ˜
const pollInterval = 5000;    // 5ì´ˆë§ˆë‹¤ í™•ì¸
```

| ì„¤ì • | í˜„ì¬ê°’ | ì¡°ì • ë²”ìœ„ | íš¨ê³¼ |
|------|--------|----------|------|
| `maxAttempts` | 60 | 40 ~ 80 | ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ (60 = 5ë¶„) |
| `pollInterval` | 5000ms | 3000 ~ 10000 | í´ë§ ë¹ˆë„ |

**ì˜ˆì‹œ**: ë” ë¹ ë¥¸ í´ë§
```typescript
// Line 173-174
const maxAttempts = 80;
const pollInterval = 3000;  // 5ì´ˆ â†’ 3ì´ˆ
```

### ë¹„ìš© ì •ë³´

- íŠ¸ë™ë‹¹ ë¹„ìš©: **$0.10 ~ $0.50** (ì¶”ì •)
- ìƒì„± ì‹œê°„: **30ì´ˆ ~ 2ë¶„**
- **ì´ ë¹„ìš©** (GPT + Mureka): **~$0.10 ~ $0.15** / íŠ¸ë™

---

## ğŸ”¬ ëª¨ë¸ ë¹„êµ ì‹¤í—˜

### 1. GPT-4o-mini vs GPT-4o

**ì‹¤í—˜ ë°©ë²•**:
```typescript
// Line 133 ìˆ˜ì •
model: 'gpt-4o',  // gpt-4o-mini â†’ gpt-4o
```

**í‰ê°€ ê¸°ì¤€**:
- í”„ë¡¬í”„íŠ¸ ìƒì„¸ë„
- ìŒì•… ìš©ì–´ ì „ë¬¸ì„±
- ê°ì • ë°˜ì˜ë„
- í¬ë¡œìŠ¤í˜ì´ë“œ ìµœì í™”

**ì˜ˆìƒ ê²°ê³¼**: í’ˆì§ˆ 10-20%â†‘, ë¹„ìš© 16ë°°â†‘

---

### 2. Temperature ë¹„êµ

**ì‹¤í—˜ ì„¤ì •**:

| Temperature | í…ŒìŠ¤íŠ¸ ìˆ˜ | ì¸¡ì • í•­ëª© |
|-------------|----------|----------|
| 0.3 | 3ê°œ | í”„ë¡¬í”„íŠ¸ ë‹¤ì–‘ì„±, í…œí¬ ì¼ê´€ì„± |
| 0.6 | 3ê°œ | |
| 0.8 (í˜„ì¬) | 3ê°œ | |
| 1.0 | 3ê°œ | |

**ì¸¡ì •**:
- í”„ë¡¬í”„íŠ¸ ë‹¤ì–‘ì„±: ê°™ì€ ì…ë ¥ì— ëŒ€í•´ ì–¼ë§ˆë‚˜ ë‹¤ë¥¸ ê²°ê³¼?
- í…œí¬ ì¼ê´€ì„±: ì´ì „ íŠ¸ë™ê³¼ BPM ì°¨ì´
- ì¥ë¥´ í˜¸í™˜ì„±: í¬ë¡œìŠ¤í˜ì´ë“œ ê°€ëŠ¥ ì—¬ë¶€

---

### 3. ì»¨í…ìŠ¤íŠ¸ ê¸¸ì´ ë¹„êµ

| ì„¤ì • | ì½”ë“œ | í† í° ì‚¬ìš© | ë¹„ìš© |
|------|------|----------|------|
| ìµœê·¼ 1ê°œ | `.slice(-1)` | ~600 | ë‚®ìŒ |
| ìµœê·¼ 2ê°œ (í˜„ì¬) | `.slice(-2)` | ~800 | ì ì • âœ“ |
| ìµœê·¼ 3ê°œ | `.slice(-3)` | ~1000 | ë†’ìŒ |

**ê¶Œì¥**: ìµœê·¼ 2ê°œ (í˜„ì¬ ì„¤ì • ìœ ì§€)

---

## âœ… ì„±ëŠ¥ í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í”„ë¡¬í”„íŠ¸ í’ˆì§ˆ

- [ ] **í…œí¬ ì¼ê´€ì„±**: v0 (70-90), vN (Â±10), vFinal (Â±15) BPM
- [ ] **ì¥ë¥´ í˜¸í™˜ì„±**: í¬ë¡œìŠ¤í˜ì´ë“œ ê°€ëŠ¥í•œ ì¡°í•©?
- [ ] **í˜ì´ë“œ ëª…ì‹œ**: "fade-in/out" í‚¤ì›Œë“œ í¬í•¨?
- [ ] **ë¶„ìœ„ê¸° ì í•©ì„±**: ì‚¬ìš©ì ê°ì • ë°˜ì˜?

### ìƒì„± íš¨ìœ¨ì„±

| í•­ëª© | ëª©í‘œ | í˜„ì¬ ìƒíƒœ |
|------|------|----------|
| GPT ì‘ë‹µ ì‹œê°„ | < 5ì´ˆ | í‰ê·  2-5ì´ˆ âœ“ |
| Mureka ìƒì„± ì‹œê°„ | < 2ë¶„ | í‰ê·  30ì´ˆ-2ë¶„ âœ“ |
| ë¹„ìš© | < $0.15/íŠ¸ë™ | ~$0.10-$0.12 âœ“ |

### ìŒì•… í’ˆì§ˆ í‰ê°€ (ì²­ì·¨ ê¸°ë°˜)

**í‰ê°€ í•­ëª©** (http://localhost:3000ì—ì„œ ì§ì ‘ ë“¤ìœ¼ë©° í‰ê°€):

1. **ë¶„ìœ„ê¸° ì í•©ì„±**:
   - ê°ì • íƒœê·¸ì™€ ìŒì•… ë¬´ë“œê°€ ì¼ì¹˜í•˜ëŠ”ì§€?
   - ì±…ì˜ ì¥ë¥´/ë¶„ìœ„ê¸°ì™€ ì–´ìš¸ë¦¬ëŠ”ì§€?

2. **í…œí¬ ìì—°ìŠ¤ëŸ¬ì›€**:
   - ë…ì„œ ë¦¬ë“¬ê³¼ ìŒì•… í…œí¬ê°€ ë§ëŠ”ì§€?
   - ë„ˆë¬´ ë¹ ë¥´ê±°ë‚˜ ëŠë¦¬ì§€ ì•Šì€ì§€?

3. **í¬ë¡œìŠ¤í˜ì´ë“œ í’ˆì§ˆ**:
   - í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ "ì „ì²´ ì¬ìƒ" ë²„íŠ¼ í´ë¦­
   - íŠ¸ë™ ì „í™˜ ì‹œ ëŠê¹€ ì—†ì´ ë¶€ë“œëŸ¬ìš´ì§€?
   - ìŒëŸ‰ì´ ì¼ì •í•˜ê²Œ ìœ ì§€ë˜ëŠ”ì§€?

4. **ì „ì²´ì  ì™„ì„±ë„**:
   - ë…ì„œ ì—¬ì • ì „ì²´ë¥¼ ìŒì•…ìœ¼ë¡œ ì˜ í‘œí˜„í–ˆëŠ”ì§€?
   - vFinal í”¼ë‚ ë ˆê°€ ê°ë™ì ì¸ì§€?

---

## ğŸ“ ì‹¤í—˜ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë” ì°¨ë¶„í•œ ìŒì•…

```typescript
// v0 (Line 57)
Create a peaceful, meditative mood...
- Use a slow tempo (50-70 BPM) for deep contemplation

// Temperature (Line 139)
temperature: 0.6,  // 0.8 â†’ 0.6
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë” ê·¹ì ì¸ í”¼ë‚ ë ˆ

```typescript
// vFinal (Line 91)
Create an epic, cinematic finale...
- Build to a grand crescendo with orchestral elements
- Include an extended outro (20-30 seconds)
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: í¬ë¡œìŠ¤í˜ì´ë“œ ìµœì í™”

```typescript
// System Prompt (Line 38)
1. Maintain strict tempo consistency (Â±5 BPM variation)  // Â±10-15 â†’ Â±5

// vN (Line 126)
- Keep tempo within ${prevTempo - 5} to ${prevTempo + 5} BPM
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# 1. ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# 2. ë¸Œë¼ìš°ì € ì ‘ì†
http://localhost:3000
```

**ìŒì•… í‰ê°€ ë°©ë²•**:
1. ë…ì„œ ì—¬ì • ì‹œì‘ (ì±… ì„ íƒ)
2. ê¸°ë¡ ì¶”ê°€ (ì¸ìš©êµ¬, ê°ì • ì…ë ¥)
3. í•˜ë‹¨ **ìŒì•… í”Œë ˆì´ì–´ ë°”**ì—ì„œ ìë™ ì¬ìƒ
4. ìŒì•…ì„ ë“¤ìœ¼ë©° ì§ì ‘ í‰ê°€:
   - ë¶„ìœ„ê¸°ê°€ ê°ì •ê³¼ ì˜ ë§ëŠ”ì§€?
   - í…œí¬ê°€ ì ì ˆí•œì§€?
   - ì¥ë¥´ê°€ ì±…ê³¼ ì–´ìš¸ë¦¬ëŠ”ì§€?
   - í¬ë¡œìŠ¤í˜ì´ë“œê°€ ë¶€ë“œëŸ¬ìš´ì§€?
5. ì—¬ëŸ¬ ê¸°ë¡ ì¶”ê°€ í›„ **ì „ì²´ ì¬ìƒ** ë²„íŠ¼ìœ¼ë¡œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸

### Production í…ŒìŠ¤íŠ¸

1. Git Push â†’ Vercel ìë™ ë°°í¬ ëŒ€ê¸° (~2-3ë¶„)
2. https://25-capstone-project-iise.vercel.app ì ‘ì†
3. ë¡œì»¬ê³¼ ë™ì¼í•˜ê²Œ ì—¬ì • ìƒì„± ë° ìŒì•… ì¬ìƒ
4. ì‹¤ì œ ì‚¬ìš©ì í™˜ê²½ì—ì„œ ìŒì•… í’ˆì§ˆ í‰ê°€

---

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜

### .env.local

```bash
# í•„ìˆ˜
OPENAI_API_KEY=sk-proj-...
MUREKA_API_KEY=mk-...

# ì„ íƒ (ê¸°ë³¸ê°’ ì‚¬ìš© ê°€ëŠ¥)
MUREKA_TIMEOUT_SECONDS=300  # 5ë¶„
```

### Vercel ë°°í¬

**Settings â†’ Environment Variables**:
- `OPENAI_API_KEY` ì¶”ê°€
- `MUREKA_API_KEY` ì¶”ê°€
- Redeploy

---

## â“ FAQ

**Q1: í”„ë¡¬í”„íŠ¸ê°€ ë„ˆë¬´ ì§§ì•„ìš”**
â†’ Temperature ë†’ì´ê¸°: `0.8` â†’ `0.9`

**Q2: ìŒì•…ì´ ê¸‰ê²©í•˜ê²Œ ë³€í•´ìš”**
â†’ BPM ë²”ìœ„ ì¢íˆê¸°: `Â±10` â†’ `Â±5`

**Q3: ë¹„ìš©ì´ ê±±ì •ë¼ìš”**
â†’ gpt-4o-mini ìœ ì§€ + ì»¨í…ìŠ¤íŠ¸ 2ê°œë¡œ ì œí•œ

**Q4: ìƒì„±ì´ ë„ˆë¬´ ë³´ìˆ˜ì ì´ì—ìš”**
â†’ Temperature ë†’ì´ê¸°: `0.8` â†’ `1.0`

**Q5: Mureka ìƒì„± ì‹¤íŒ¨**
â†’ `.env.local`ì—ì„œ `MUREKA_API_KEY` í™•ì¸

**Q6: Temperature ë³€ê²½í–ˆëŠ”ë° ê²°ê³¼ê°€ ë˜‘ê°™ì•„ìš”**
â†’ ì„œë²„ ì¬ì‹œì‘ (`npm run dev`) + ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ (Ctrl+Shift+R)

**Q7: íŠ¹ì • ì¥ë¥´ë§Œ ê³„ì† ë‚˜ì™€ìš”**
â†’ Temperature ë†’ì´ê¸° + v0 í”„ë¡¬í”„íŠ¸ì— ì¥ë¥´ ë²”ìœ„ ì¶”ê°€

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ë‚´ë¶€ ë¬¸ì„œ

- [ìŒì•… ìƒì„± API ê°€ì´ë“œ](./music-generation-api-guide.md) - ê°œë°œììš© ìƒì„¸ ê°€ì´ë“œ
- [CLAUDE.md](../CLAUDE.md) - í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš”

### ì™¸ë¶€ ë¬¸ì„œ

- [OpenAI Chat API](https://platform.openai.com/docs/api-reference/chat)
- [Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering)
- [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/GainNode)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-01
